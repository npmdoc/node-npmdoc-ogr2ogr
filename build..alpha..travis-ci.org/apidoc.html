<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://github.com/wavded/ogr2ogr"

    >ogr2ogr (v1.0.1)</a>
</h1>
<h4>ogr2ogr wrapper w/ multiple format support</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.ogr2ogr">module ogr2ogr</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.ogr2ogr">
            function <span class="apidocSignatureSpan"></span>ogr2ogr
            <span class="apidocSignatureSpan">(mixed, fmt)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ogr2ogr.</span>csv</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ogr2ogr.</span>util</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ogr2ogr.</span>zip</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ogr2ogr.csv">module ogr2ogr.csv</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.csv.makeVrt">
            function <span class="apidocSignatureSpan">ogr2ogr.csv.</span>makeVrt
            <span class="apidocSignatureSpan">(fpath, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ogr2ogr.util">module ogr2ogr.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.util.allCallback">
            function <span class="apidocSignatureSpan">ogr2ogr.util.</span>allCallback
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.util.genTmpPath">
            function <span class="apidocSignatureSpan">ogr2ogr.util.</span>genTmpPath
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.util.getDriver">
            function <span class="apidocSignatureSpan">ogr2ogr.util.</span>getDriver
            <span class="apidocSignatureSpan">(fmt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.util.oneCallback">
            function <span class="apidocSignatureSpan">ogr2ogr.util.</span>oneCallback
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.util.rmDir">
            function <span class="apidocSignatureSpan">ogr2ogr.util.</span>rmDir
            <span class="apidocSignatureSpan">(dpath, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.util.rmFile">
            function <span class="apidocSignatureSpan">ogr2ogr.util.</span>rmFile
            <span class="apidocSignatureSpan">(fpath, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.util.rmParentDir">
            function <span class="apidocSignatureSpan">ogr2ogr.util.</span>rmParentDir
            <span class="apidocSignatureSpan">(fpath, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.util.tmpl">
            function <span class="apidocSignatureSpan">ogr2ogr.util.</span>tmpl
            <span class="apidocSignatureSpan">(tmpl, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.util.writeGeoJSON">
            function <span class="apidocSignatureSpan">ogr2ogr.util.</span>writeGeoJSON
            <span class="apidocSignatureSpan">(obj, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.util.writeStream">
            function <span class="apidocSignatureSpan">ogr2ogr.util.</span>writeStream
            <span class="apidocSignatureSpan">(ins, ext, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ogr2ogr.zip">module ogr2ogr.zip</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.zip.createZipStream">
            function <span class="apidocSignatureSpan">ogr2ogr.zip.</span>createZipStream
            <span class="apidocSignatureSpan">(dpath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.zip.extract">
            function <span class="apidocSignatureSpan">ogr2ogr.zip.</span>extract
            <span class="apidocSignatureSpan">(fpath, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ogr2ogr.zip.findOgrFile">
            function <span class="apidocSignatureSpan">ogr2ogr.zip.</span>findOgrFile
            <span class="apidocSignatureSpan">(dpath, cb)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ogr2ogr" id="apidoc.module.ogr2ogr">module ogr2ogr</a></h1>


    <h2>
        <a href="#apidoc.element.ogr2ogr.ogr2ogr" id="apidoc.element.ogr2ogr.ogr2ogr">
        function <span class="apidocSignatureSpan"></span>ogr2ogr
        <span class="apidocSignatureSpan">(mixed, fmt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Ogr2ogr(mixed, fmt) {
  if (!(this instanceof Ogr2ogr)) return new Ogr2ogr(mixed, fmt)

  if (!mixed) {
    throw new Error(&#x27;A file path, stream, or GeoJSON object is required&#x27;)
  }

  if (mixed instanceof stream) {
    var driver = util.getDriver(fmt || path.extname(mixed.path).replace(&#x27;.&#x27;,&#x27;&#x27;))
    if (!driver) throw new Error(&#x27;Streams require a valid input format&#x27;)
    this._inStream = mixed
    this._inDriver = driver
  }
  else if (typeof mixed == &#x27;object&#x27;) {
    this._inGeoJSON = mixed
  }
  else {
    this._inPath = mixed
  }

  this._driver = {}
  this._args = []
  this._timeout = 15000
  this._format = &#x27;GeoJSON&#x27;
  this._skipfailures = false

  this._testClean = function() {} // testing
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ogr2ogr.csv" id="apidoc.module.ogr2ogr.csv">module ogr2ogr.csv</a></h1>


    <h2>
        <a href="#apidoc.element.ogr2ogr.csv.makeVrt" id="apidoc.element.ogr2ogr.csv.makeVrt">
        function <span class="apidocSignatureSpan">ogr2ogr.csv.</span>makeVrt
        <span class="apidocSignatureSpan">(fpath, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">makeVrt = function (fpath, cb) {
  extractHead(fpath, function(er, headers) {
    if (er) return cb(er)

    var geo = {}
    headers.forEach(function(header) {
      var ht = (header + &#x27;&#x27;).trim()
      switch (true) {
      case /\b(lon|longitude|lng|x)\b/i.test(ht):
        geo.x = header
        break
      case /\b(lat|latitude|y)\b/i.test(ht):
        geo.y = header
        break
      case /\b(the_geom|geom)\b/i.test(ht):
        geo.geom = header
        break
      default:
      }
    })

    if (!geo.geom &#x26;&#x26; !geo.x) return cb(null, fpath) // no geometry fields, parse attributes

    var vrtData = util.tmpl(BASE_VRT, {
      file: fpath,
      name: path.basename(fpath, &#x27;.csv&#x27;),
      enc: geo.geom ? &#x27;WKT&#x27; : &#x27;PointFromColumns&#x27;,
      encopt: geo.geom
                ? &#x27;field=&#x22;&#x27; + geo.geom + &#x27;&#x22;&#x27;
                : &#x27;x=&#x22;&#x27; + geo.x + &#x27;&#x22; y=&#x22;&#x27; + geo.y + &#x27;&#x22;&#x27;,
    })

    var vrtPath = util.genTmpPath() + &#x27;.vrt&#x27;
    return fs.writeFile(vrtPath, vrtData, function(er) {
      cb(er, vrtPath)
    })
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (ogr2ogr._isZipIn) {
  zip.extract(fpath, function(er2, fpath2) {
    if (er2) return one(er2)
    zip.findOgrFile(fpath2, one)
  })
}
else if (ogr2ogr._isCsvIn) {
  csv.<span class="apidocCodeKeywordSpan">makeVrt</span>(fpath, function(err, vrt) {
    if (vrt &#x26;&#x26; /\.vrt$/.test(vrt)) {
      // always set a source srs
      if (!ogr2ogr._sourceSrs) ogr2ogr._sourceSrs = ogr2ogr._targetSrs
    } else {
      // no geo data so no target srs
      delete ogr2ogr._targetSrs
    }
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ogr2ogr.util" id="apidoc.module.ogr2ogr.util">module ogr2ogr.util</a></h1>


    <h2>
        <a href="#apidoc.element.ogr2ogr.util.allCallback" id="apidoc.element.ogr2ogr.util.allCallback">
        function <span class="apidocSignatureSpan">ogr2ogr.util.</span>allCallback
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">allCallback = function (cb) {
  var one = exports.oneCallback(cb)
  var expect = 0
  var total = 0

  setImmediate(function() { if (expect == 0) one(null, total) })

  return function() {
    expect++, total++
    return function(er) {
      if (er) return one(er)
      if (--expect == 0) one(null, total)
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  zs.pipe(ostream)
}

return ostream
}

Ogr2ogr.prototype._clean = function() {
var all = util.<span class="apidocCodeKeywordSpan">allCallback</span>(this._testClean)

if (this._inStream &#x26;&#x26; this._driver.output == &#x27;zip&#x27;) {
  util.rmDir(this._inPath, all())
}
else if (this._inStream || this._inGeoJSON) {
  util.rmFile(this._inPath, all())
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ogr2ogr.util.genTmpPath" id="apidoc.element.ogr2ogr.util.genTmpPath">
        function <span class="apidocSignatureSpan">ogr2ogr.util.</span>genTmpPath
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">genTmpPath = function () {
  return path.join(tmpdir, &#x27;ogr_&#x27; + (genInc++).toString(14))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

ogr2ogr._inPath = fpath

ogr2ogr._isZipIn = /zip|kmz/.test(path.extname(fpath)) &#x26;&#x26; !/^\/vsizip\//.test(fpath)
ogr2ogr._isCsvIn = /csv/.test(path.extname(fpath))
ogr2ogr._isZipOut = ogr2ogr._driver.output == &#x27;zip&#x27;

ogr2ogr._ogrOutPath = ogr2ogr._isZipOut ? util.<span class="apidocCodeKeywordSpan">genTmpPath</span>() : &#x27;/vsistdout/&#x27;

if (ogr2ogr._isZipIn) {
  zip.extract(fpath, function(er2, fpath2) {
    if (er2) return one(er2)
    zip.findOgrFile(fpath2, one)
  })
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ogr2ogr.util.getDriver" id="apidoc.element.ogr2ogr.util.getDriver">
        function <span class="apidocSignatureSpan">ogr2ogr.util.</span>getDriver
        <span class="apidocSignatureSpan">(fmt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDriver = function (fmt) {
  for (var i = 0; i &#x3c; drivers.length; i++) {
    if (drivers[i].format == fmt || drivers[i].aliases.indexOf(fmt) &#x3e; -1) return drivers[i]
  }
  return {}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (!(this instanceof Ogr2ogr)) return new Ogr2ogr(mixed, fmt)

if (!mixed) {
  throw new Error(&#x27;A file path, stream, or GeoJSON object is required&#x27;)
}

if (mixed instanceof stream) {
  var driver = util.<span class="apidocCodeKeywordSpan">getDriver</span>(fmt || path.extname(mixed.path).replace(&#x27;.&#x27;,&#
x27;&#x27;))
  if (!driver) throw new Error(&#x27;Streams require a valid input format&#x27;)
  this._inStream = mixed
  this._inDriver = driver
}
else if (typeof mixed == &#x27;object&#x27;) {
  this._inGeoJSON = mixed
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ogr2ogr.util.oneCallback" id="apidoc.element.ogr2ogr.util.oneCallback">
        function <span class="apidocSignatureSpan">ogr2ogr.util.</span>oneCallback
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">oneCallback = function (cb) {
  var called = false
  return function(er, data) {
    if (called) return
    called = true
    cb(er, data)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (src) this._sourceSrs = src
return this
}

Ogr2ogr.prototype.exec = function(cb) {
var ogr2ogr = this
var buf = []
var one = util.<span class="apidocCodeKeywordSpan">oneCallback</span>(cb)

this.stream()
  .on(&#x27;data&#x27;, function(chunk) { buf.push(chunk) })
  .on(&#x27;error&#x27;, one)
  .on(&#x27;close&#x27;, function() {
    var data = Buffer.concat(buf)
    if (ogr2ogr._format == &#x27;GeoJSON&#x27;) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ogr2ogr.util.rmDir" id="apidoc.element.ogr2ogr.util.rmDir">
        function <span class="apidocSignatureSpan">ogr2ogr.util.</span>rmDir
        <span class="apidocSignatureSpan">(dpath, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rmDir = function (dpath, cb) { rimraf(dpath, cb) }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return ostream
}

Ogr2ogr.prototype._clean = function() {
var all = util.allCallback(this._testClean)

if (this._inStream &#x26;&#x26; this._driver.output == &#x27;zip&#x27;) {
  util.<span class="apidocCodeKeywordSpan">rmDir</span>(this._inPath, all())
}
else if (this._inStream || this._inGeoJSON) {
  util.rmFile(this._inPath, all())
}

if (this._isZipIn &#x26;&#x26; this._ogrInPath) {
  util.rmParentDir(this._ogrInPath, all())
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ogr2ogr.util.rmFile" id="apidoc.element.ogr2ogr.util.rmFile">
        function <span class="apidocSignatureSpan">ogr2ogr.util.</span>rmFile
        <span class="apidocSignatureSpan">(fpath, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rmFile = function (fpath, cb) { fs.unlink(fpath, cb) }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Ogr2ogr.prototype._clean = function() {
var all = util.allCallback(this._testClean)

if (this._inStream &#x26;&#x26; this._driver.output == &#x27;zip&#x27;) {
  util.rmDir(this._inPath, all())
}
else if (this._inStream || this._inGeoJSON) {
  util.<span class="apidocCodeKeywordSpan">rmFile</span>(this._inPath, all())
}

if (this._isZipIn &#x26;&#x26; this._ogrInPath) {
  util.rmParentDir(this._ogrInPath, all())
}
if (this._isCsvIn &#x26;&#x26; /vrt/.test(this._ogrInPath)) {
  util.rmFile(this._ogrInPath, all())
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ogr2ogr.util.rmParentDir" id="apidoc.element.ogr2ogr.util.rmParentDir">
        function <span class="apidocSignatureSpan">ogr2ogr.util.</span>rmParentDir
        <span class="apidocSignatureSpan">(fpath, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rmParentDir = function (fpath, cb) { rimraf(path.dirname(fpath), cb) }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  util.rmDir(this._inPath, all())
}
else if (this._inStream || this._inGeoJSON) {
  util.rmFile(this._inPath, all())
}

if (this._isZipIn &#x26;&#x26; this._ogrInPath) {
  util.<span class="apidocCodeKeywordSpan">rmParentDir</span>(this._ogrInPath, all())
}
if (this._isCsvIn &#x26;&#x26; /vrt/.test(this._ogrInPath)) {
  util.rmFile(this._ogrInPath, all())
}
if (this._isZipOut) {
  util.rmDir(this._ogrOutPath, all())
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ogr2ogr.util.tmpl" id="apidoc.element.ogr2ogr.util.tmpl">
        function <span class="apidocSignatureSpan">ogr2ogr.util.</span>tmpl
        <span class="apidocSignatureSpan">(tmpl, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tmpl = function (tmpl, data) {
  for (var label in data) {
    tmpl = tmpl.replace(&#x27;{{&#x27; + label + &#x27;}}&#x27;, data[label])
  }
  return tmpl
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    break
  default:
  }
})

if (!geo.geom &#x26;&#x26; !geo.x) return cb(null, fpath) // no geometry fields, parse attributes

var vrtData = util.<span class="apidocCodeKeywordSpan">tmpl</span>(BASE_VRT, {
  file: fpath,
  name: path.basename(fpath, &#x27;.csv&#x27;),
  enc: geo.geom ? &#x27;WKT&#x27; : &#x27;PointFromColumns&#x27;,
  encopt: geo.geom
            ? &#x27;field=&#x22;&#x27; + geo.geom + &#x27;&#x22;&#x27;
            : &#x27;x=&#x22;&#x27; + geo.x + &#x27;&#x22; y=&#x22;&#x27; + geo.y + &#x27;&#x22;&#x27;,
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ogr2ogr.util.writeGeoJSON" id="apidoc.element.ogr2ogr.util.writeGeoJSON">
        function <span class="apidocSignatureSpan">ogr2ogr.util.</span>writeGeoJSON
        <span class="apidocSignatureSpan">(obj, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeGeoJSON = function (obj, cb) {
  var fpath = genTmpPath() + &#x27;.json&#x27;
  fs.writeFile(fpath, JSON.stringify(obj), function(er) {
    cb(er, fpath)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var ogr2ogr = this
var one = util.oneCallback(cb)

if (this._inStream) {
  util.writeStream(this._inStream, this._inDriver.output, getInFilePath)
}
else if (this._inGeoJSON) {
  util.<span class="apidocCodeKeywordSpan">writeGeoJSON</span>(this._inGeoJSON, getInFilePath)
}
else {
  getInFilePath(null, this._inPath)
}

function getInFilePath(er, fpath) {
  if (er) return one(er)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ogr2ogr.util.writeStream" id="apidoc.element.ogr2ogr.util.writeStream">
        function <span class="apidocSignatureSpan">ogr2ogr.util.</span>writeStream
        <span class="apidocSignatureSpan">(ins, ext, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeStream = function (ins, ext, cb) {
  var fpath = genTmpPath() + &#x27;.&#x27; + ext
  var ws = fs.createWriteStream(fpath)
  var one = exports.oneCallback(cb)

  ins.pipe(ws)
    .on(&#x27;error&#x27;, one)
    .on(&#x27;finish&#x27;, function() {
      one(null, fpath)
    })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

Ogr2ogr.prototype._getOrgInPath = function(cb) {
var ogr2ogr = this
var one = util.oneCallback(cb)

if (this._inStream) {
  util.<span class="apidocCodeKeywordSpan">writeStream</span>(this._inStream, this._inDriver.output, getInFilePath)
}
else if (this._inGeoJSON) {
  util.writeGeoJSON(this._inGeoJSON, getInFilePath)
}
else {
  getInFilePath(null, this._inPath)
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ogr2ogr.zip" id="apidoc.module.ogr2ogr.zip">module ogr2ogr.zip</a></h1>


    <h2>
        <a href="#apidoc.element.ogr2ogr.zip.createZipStream" id="apidoc.element.ogr2ogr.zip.createZipStream">
        function <span class="apidocSignatureSpan">ogr2ogr.zip.</span>createZipStream
        <span class="apidocSignatureSpan">(dpath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createZipStream = function (dpath) {
  var zs = archiver(&#x27;zip&#x27;)

  fs.readdir(dpath, function(er, files) {
    if (er) return zs.emit(&#x27;error&#x27;, er)

    files.forEach(function(file) {
      var f = fs.createReadStream(path.join(dpath, file))
      zs.append(f, {name: file})
    })
    zs.finalize(function(er) {
      if (er) zs.emit(&#x27;error&#x27;, er)
    })
  })

  return zs
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    if (!ogr2ogr._isZipOut) {
      ostream.emit(&#x27;end&#x27;)
      ostream.emit(&#x27;close&#x27;)
      return ogr2ogr._clean()
    }

    var zs = zip.<span class="apidocCodeKeywordSpan">createZipStream</span>(ogr2ogr._ogrOutPath)
    zs.on(&#x27;error&#x27;, function(er2) { ostream.emit(&#x27;error&#x27;, er2) })
    zs.on(&#x27;end&#x27;, function() { ostream.emit(&#x27;close&#x27;); ogr2ogr._clean() })
    zs.pipe(ostream)
  }

  return ostream
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ogr2ogr.zip.extract" id="apidoc.element.ogr2ogr.zip.extract">
        function <span class="apidocSignatureSpan">ogr2ogr.zip.</span>extract
        <span class="apidocSignatureSpan">(fpath, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extract = function (fpath, cb) {
  var zip = new DecompressZip(fpath)
  var zipPath = util.genTmpPath()
  var one = util.oneCallback(cb)

  zip
    .on(&#x27;extract&#x27;, function() {
      one(null, zipPath)
    })
    .on(&#x27;error&#x27;, one)
    .extract({path: zipPath})
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
ogr2ogr._isZipIn = /zip|kmz/.test(path.extname(fpath)) &#x26;&#x26; !/^\/vsizip\//.test(fpath)
ogr2ogr._isCsvIn = /csv/.test(path.extname(fpath))
ogr2ogr._isZipOut = ogr2ogr._driver.output == &#x27;zip&#x27;

ogr2ogr._ogrOutPath = ogr2ogr._isZipOut ? util.genTmpPath() : &#x27;/vsistdout/&#x27;

if (ogr2ogr._isZipIn) {
  zip.<span class="apidocCodeKeywordSpan">extract</span>(fpath, function(er2, fpath2) {
    if (er2) return one(er2)
    zip.findOgrFile(fpath2, one)
  })
}
else if (ogr2ogr._isCsvIn) {
  csv.makeVrt(fpath, function(err, vrt) {
    if (vrt &#x26;&#x26; /\.vrt$/.test(vrt)) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ogr2ogr.zip.findOgrFile" id="apidoc.element.ogr2ogr.zip.findOgrFile">
        function <span class="apidocSignatureSpan">ogr2ogr.zip.</span>findOgrFile
        <span class="apidocSignatureSpan">(dpath, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findOgrFile = function (dpath, cb) {
  var finder = findit(dpath)
  var found

  finder.on(&#x27;file&#x27;, function(file, stat) {
    if (validOgrRe.test(path.extname(file))) found = file
  })
  finder.on(&#x27;error&#x27;, function(er) {
    cb(er)
    finder.stop() // prevent multiple callbacks, stop at first error
  })
  finder.on(&#x27;end&#x27;, function() {
    if (!found) return cb(new Error(&#x27;No valid files found&#x27;))
    cb(null, found)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
ogr2ogr._isZipOut = ogr2ogr._driver.output == &#x27;zip&#x27;

ogr2ogr._ogrOutPath = ogr2ogr._isZipOut ? util.genTmpPath() : &#x27;/vsistdout/&#x27;

if (ogr2ogr._isZipIn) {
  zip.extract(fpath, function(er2, fpath2) {
    if (er2) return one(er2)
    zip.<span class="apidocCodeKeywordSpan">findOgrFile</span>(fpath2, one)
  })
}
else if (ogr2ogr._isCsvIn) {
  csv.makeVrt(fpath, function(err, vrt) {
    if (vrt &#x26;&#x26; /\.vrt$/.test(vrt)) {
      // always set a source srs
      if (!ogr2ogr._sourceSrs) ogr2ogr._sourceSrs = ogr2ogr._targetSrs
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
